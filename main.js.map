{"version":3,"sources":["webpack://todo/./src/index.js"],"names":["Item","text","this","id","countInstances","count","Context","super","taskList","active","task","push","foundIndex","findIndex","taskToCompare","splice","todoController","TodoDisplay","Task","ContextList","contextList","todoDisplay","init","onClickAddContext","bind","onClickDeleteContext","onDclickEditContext","onEnterSaveInput","initListeners","loadStartPage","userInput","getContextInputValue","createNewContext","activeContext","getActiveContext","renderAllContexts","getAllContexts","appendTask","context","addNewContext","appendNewContext","_this","event","elementToDelete","getElementToDelete","itemToDeleteId","getItemId","deleteContext","removeContext","prepareContextEdit","target","key","input","getUserInput","contextElement","getContextElement","contextId","contextIndex","getIndexOfContext","list","update","updateContextAfterEdit","deleteTask","contextContainer","document","getElementById","contextInput","contextButton","taskContainer","taskInput","taskButton","addEventListener","contexts","forEach","delBtn","createDelBtn","innerContent","createInnerContent","createContextElement","appendChild","para","createElement","classList","add","dataset","itemid","deleteButton","innerHTML","span","inputBox","placeHolder","firstChild","textContent","paraElements","parentNode","type","placeholder","remove","element","value","tasks","favorite","defaultContext","setActiveContext","contextListIndex","console","log","contextIndexInList","parseInt","currentContext","createNewTask"],"mappings":"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","file":"main.js","sourcesContent":["//Is used by Task and Context to inherit properties and methods\nclass Item {\n    constructor(text) {\n        this.text = text;\n        this.id = Item.countInstances();\n    }\n    \n    static countInstances() {\n        Item.count = (Item.count || 0) + 1;\n        return Item.count;\n    }\n}\n\n//Creates unlimited task objects\nclass Task extends Item {\n    constructor(text) {\n        super(text);\n        this.favorite = false;\n    }\n}\n\n//Creates unlimited context objects with the ability to add and delete tasks\nclass Context extends Item {\n    constructor(text) {\n        super(text);\n        this.taskList = [];\n        this.active = true;\n    }\n\n    appendTask(task) {\n        this.taskList.push(task);\n    }\n\n    deleteTask(task) {\n        const isSameId = taskToCompare => taskToCompare.id === task.id;\n        const foundIndex = this.taskList.findIndex(isSameId);\n        this.taskList.splice(foundIndex, 1);\n    }\n\n    update(text) {\n        this.text = text;\n    }\n}\n\n//Creates a single object where all contexts with their tasks are listed\nclass ContextList {\n    constructor(Context){\n        this.Context = Context;\n        this.list = [];\n        this.init();\n    }\n\n    init() {\n        const defaultContext = new Context('inbox');\n        this.addNewContext(defaultContext);\n        this.setActiveContext(defaultContext);\n    }\n\n    addNewContext(context) {\n        this.list.push(context);\n    }\n\n    deleteContext(contextId) {\n        const contextListIndex = this.getIndexOfContext(contextId);\n        this.list.splice(contextListIndex, 1);\n    }\n\n    getContext(contextId) {\n        console.log(contextId);\n        //Warum kommt bei folgener Zeile -1 raus und nicht passender Index?\n        const contextIndexInList = this.getIndexOfContext(contextId);\n        console.log(contextIndexInList);\n        return this.list[contextIndexInList];\n    }\n\n    getIndexOfContext(contextId) {\n        contextId = parseInt(contextId);\n        const contextListIndex = this.list.findIndex(function(currentContext) {\n            if (currentContext.id === contextId){\n                return true;\n            }\n        })\n        return contextListIndex;\n    }\n\n    /* editContext\n\n    Describe Problem: If user doublecklicks on context\n    it should be editable. If user presses enter changes should be saved\n    \n    Plan: \n    - Add onDclickEditContext on every context in TodoDisplay \n    in appendNewContext\n    - Write logic of onDclickEditContext in TodoController\n        Call editContext in TodoDisplay\n    - Write editContext logic in TodoDisplay: \n        Create inputbox \n        Put context text into inputbox\n        Create onEnterSaveInput listener for inputbox\n    -   Write logic of onEnterSaveInput in TodoController\n        Call updateContext in Context\n        Call updateContext in TodoDisplay\n    Code and plan further: \n    */\n\n    setActiveContext(context) {\n        this.activeContext = context;\n    }\n\n    getActiveContext() {\n        return this.activeContext;\n    }\n\n    getAllContexts() {\n        return this.list;\n    }\n}\n\n//Creates the right view of the current state of objects\nclass TodoDisplay {\n    constructor() {\n        this.contextContainer = document.getElementById('context-container');\n        this.contextInput = document.getElementById('context-input');\n        this.contextButton = document.getElementById('context-add');\n        this.taskContainer = document.getElementById('task-container');\n        this.taskInput = document.getElementById('task-input');\n        this.taskButton = document.getElementById('task-add');\n\n        this.onClickAddContext = null;\n        this.onClickDeleteContext = null;\n        this.onDclickEditContext = null;\n        this.onEnterSaveInput = null;\n    }\n\n    initListeners() {\n        this.contextButton.addEventListener('click', this.onClickAddContext);\n    }\n\n    renderAllContexts(contexts) {\n        contexts.forEach(this.appendNewContext.bind(this));\n    }\n\n    appendNewContext(context) {\n        const delBtn = this.createDelBtn();\n        const innerContent = this.createInnerContent(context.text, delBtn);\n        const contextElement = this.createContextElement(context.id, innerContent);\n        // contextElement.addEventListener('dblclick', this.onDclickEditContext)\n        this.contextContainer.appendChild(contextElement);\n    }\n\n    createContextElement(id, innerContent) {\n        const para = document.createElement('p');\n        para.classList.add('context');\n        para.dataset.itemid = id;\n        para.addEventListener('dblclick', this.onDclickEditContext);\n        para.appendChild(innerContent);\n        return para;\n    }\n\n    createDelBtn(){\n        const deleteButton = document.createElement('button');\n        deleteButton.innerHTML = 'del';\n        deleteButton.addEventListener('click', this.onClickDeleteContext);\n        return deleteButton;\n    }\n\n    createInnerContent(text, delBtn) {\n        const innerContent = document.createElement('div');\n        const span = document.createElement('span');\n        span.innerHTML = text;\n        innerContent.appendChild(span);\n        innerContent.appendChild(delBtn);\n        return innerContent;\n    }\n    \n    prepareContextEdit(span){\n        //Implement helper methods for code below\n        const inputBox = document.createElement('input');\n        const placeHolder = span.firstChild.textContent;\n        //Name paraElements better maybe currentInnerContent?\n        this.paraElements = span.parentNode;\n        const para = this.paraElements.parentNode;\n        inputBox.type = 'text';\n        inputBox.placeholder = placeHolder;\n        inputBox.addEventListener('keyup', this.onEnterSaveInput)\n        para.firstChild.remove();\n        para.appendChild(inputBox);\n    }\n\n    removeContext(element) {\n        element.remove();\n    }\n\n    updateContextAfterEdit(para, text) {\n        this.paraElements.firstChild.innerHTML = text;\n        //Remove inputBox\n        para.firstChild.remove();\n        //Append updated Text and Delete Button\n        para.appendChild(this.paraElements);\n    }\n\n    getElementToDelete(event) {\n        return event.target.parentNode.parentNode;\n    }\n\n    getItemId(element) {\n        return element.dataset.itemid;\n    }\n\n    getContextInputValue(){\n        return this.contextInput.value;\n    }\n\n    getContextElement(event) {\n        return event.target.parentNode;\n    }\n\n    getUserInput(event) {\n        return event.target.value;\n    }\n\n    renderTasks(tasks) {\n        //Display tasks of inbox context\n    }\n}\n\n//Handles all the todo App logic\nclass TodoController {\n    constructor(TodoDisplay, Task, Context,ContextList) {\n        this.Task = Task;\n        this.Context = Context;\n        this.contextList = new ContextList(this.Context);\n        this.todoDisplay = new TodoDisplay();\n\n        this.init();\n    }\n\n    init() {\n        this.todoDisplay.onClickAddContext = this.onClickAddContext.bind(this);\n        // Writing conlickDeleteContext so, that following arguments are passed:  \n        // this which equals TodoController object\n        // event of event Listener which isn't seen here \n        // but can be accessed as last parameter in onClickDeleteContext\n        this.todoDisplay.onClickDeleteContext = this.onClickDeleteContext.bind(null, this);\n        this.todoDisplay.onDclickEditContext = this.onDclickEditContext.bind(null, this);\n        this.todoDisplay.onEnterSaveInput = this.onEnterSaveInput.bind(null, this);\n        this.todoDisplay.initListeners();\n        this.loadStartPage();\n    }\n\n    onClickAddContext() {\n        const userInput = this.todoDisplay.getContextInputValue();\n        this.createNewContext(userInput);\n    }\n\n    loadStartPage() {\n        this.activeContext = this.contextList.getActiveContext();\n        this.todoDisplay.renderAllContexts(this.contextList.getAllContexts());\n    }\n    \n    createNewTask(text) {\n        const task = new this.Task(text);  \n        this.contextList.getActiveContext().appendTask(task);\n    }\n\n    createNewContext(text) {\n        const context = new this.Context(text);  \n        this.contextList.addNewContext(context);\n        this.todoDisplay.appendNewContext(context);\n    }\n\n    onClickDeleteContext(_this, event) {\n        const elementToDelete = _this.todoDisplay.getElementToDelete(event);\n        const itemToDeleteId = _this.todoDisplay.getItemId(elementToDelete);\n        _this.contextList.deleteContext(itemToDeleteId);\n        _this.todoDisplay.removeContext(elementToDelete)\n    }\n\n    onDclickEditContext(_this, event) {\n        _this.todoDisplay.prepareContextEdit(event.target);\n    }\n\n    onEnterSaveInput(_this, event) {\n        if (event.key === 'Enter'){\n            const input = _this.todoDisplay.getUserInput(event);\n            const contextElement = _this.todoDisplay.getContextElement(event);\n            const contextId = _this.todoDisplay.getItemId(contextElement);\n            const contextIndex = _this.contextList.getIndexOfContext(contextId);\n            _this.contextList.list[contextIndex].update(input);\n            _this.todoDisplay.updateContextAfterEdit(contextElement, input);\n        }\n    }\n    \n    \n    removeTask(task) {\n        this.contextList.getActiveContext().deleteTask(task);\n        //remove this task from current View\n    }\n}\n\nconst todoController = new TodoController(TodoDisplay, Task, Context, ContextList);\ntodoController.createNewTask('taskA');\ntodoController.createNewTask('taskB');\ntodoController.createNewContext('contextB');\ntodoController.createNewContext('contextC');\n\n"],"sourceRoot":""}